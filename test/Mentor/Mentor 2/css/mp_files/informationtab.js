Informationtab=function(a){var b=this;b.dom,b.drawningboard=a,b.x,b.y,b.layer,b.rotation,b.height,b.width,b.target,b.oldx,b.oldy,b.oldHeight,b.oldWidth,$.widget("ui.lyspinner",$.ui.spinner,{options:{step:1,spin:function(a){var c="front";return $(a.originalEvent.originalEvent.toElement).hasClass("ui-icon-triangle-1-s")?c="back":$(a.originalEvent.originalEvent.target).hasClass("ui-icon-triangle-1-s")?c="back":a.originalEvent.originalEvent.wheelDelta<0&&(c="back"),"front"==c?b.drawningboard.selector.front():b.drawningboard.selector.back(),b.update(),!1},change:function(){var a=$(this).val();isNaN(a)&&$(this).val("-")}},_parse:function(a){return a=String(a),a=a.match(/\d+/),a=void 0!=a?parseInt(a[0]):0},_format:function(a){return a}}),$.widget("ui.rotspinner",$.ui.spinner,{options:{step:1,spin:function(a){var c="front";return $(a.originalEvent.originalEvent.toElement).hasClass("ui-icon-triangle-1-s")?c="back":$(a.originalEvent.originalEvent.target).hasClass("ui-icon-triangle-1-s")?c="back":a.originalEvent.originalEvent.wheelDelta<0&&(c="back"),b.drawningboard.selector.contextaction=!0,"front"==c?b.drawningboard.selector.rotateright():b.drawningboard.selector.rotateleft(),b.update(),b.drawningboard.selector.contextrelease(),!1},change:function(){var a=$(this).val();isNaN(a)&&$(this).val("-")}},_parse:function(a){return a=String(a),a=a.match(/\d+/),a=void 0!=a?parseInt(a[0]):0},_format:function(a){return a+"°"}}),b.start=function(){b.drawningboard.api.loadTemplate("informationtab",function(a){b.dom=$(a),$("#drawningboard").append(b.dom),b.x=b.dom.find(".x"),b.y=b.dom.find(".y"),b.layer=b.dom.find(".layer"),b.rotation=b.dom.find(".rotation"),b.height=b.dom.find(".height"),b.width=b.dom.find(".width"),b.registerEvents(),b.update()})},b.select=function(a){b.unselect(),b.target=a},b.unselect=function(){b.x.is(":focus")&&b.x.blur(),b.y.is(":focus")&&b.y.blur(),b.width.is(":focus")&&b.width.blur(),b.height.is(":focus")&&(console.log("xuxu"),b.height.blur()),b.target=[]},b.update=function(a){b.target?(1==b.target.length?(b.loadLayer(b.drawningboard.selector.explodedmode?b.target[0].subid:b.target[0].index),b.loadRotation(b.target[0].rotation)):(b.loadLayer(b.drawningboard.selector.targetisicon()?b.target[0].index:null),b.loadRotation(null)),b.loadX(b.drawningboard.selector.x,a),b.loadY(b.drawningboard.selector.y,a),b.loadWidth(b.drawningboard.selector.width-2*b.drawningboard.selector.selectionborderw,a),b.loadHeight(b.drawningboard.selector.height-2*b.drawningboard.selector.selectionborderh,a)):(b.loadLayer(null),b.loadRotation(null),b.loadX(null),b.loadY(null),b.loadWidth(null),b.loadHeight(null))},b.loadLayer=function(a){b.layer.attr("readonly",!0),void 0!=a?(b.layer.val(a),b.layer.lyspinner("value",a)):(b.layer.val("-"),b.layer.lyspinner("value","-"))},b.loadRotation=function(a){b.rotation.attr("readonly",!0),void 0!=a?(b.rotation.val(a+"°"),b.rotation.rotspinner("value",a)):(b.rotation.val("-"),b.rotation.rotspinner("value","-"))},b.loadX=function(a,c){void 0!=a?(!b.x.is(":focus")||c)&&(b.oldx=a,b.x.val(parseInt(a)+"px"),b.x.removeAttr("disabled")):(b.x.val("-"),b.x.attr("disabled","disabled"))},b.loadY=function(a,c){void 0!=a?(!b.y.is(":focus")||c)&&(b.oldy=a,b.y.val(parseInt(a)+"px"),b.y.removeAttr("disabled")):(b.y.val("-"),b.y.attr("disabled","disabled"))},b.loadWidth=function(a,c){a?(!b.width.is(":focus")||c)&&(b.oldWidth=a,b.width.val(parseInt(a)+"px"),b.width.removeAttr("disabled")):(b.width.val("-"),b.width.attr("disabled","disabled"))},b.loadHeight=function(a,c){a?(!b.height.is(":focus")||c)&&(b.oldHeight=a,b.height.val(parseInt(a)+"px"),b.height.removeAttr("disabled")):(b.height.val("-"),b.height.attr("disabled","disabled"))},b.registerEvents=function(){b.layer.lyspinner().val("-"),b.rotation.rotspinner().val("-");var a=b.x.add(b.y).add(b.width).add(b.height);a.on("focus",function(){$(this).mask("9999"),$(this).val("")}),a.on("blur",function(){$(this).unmask()}),a.keybind("keydown",{"return":function(){$(this).blur()},escape:function(a){b.update(!0),a.stopPropagation(),$(this).blur()}}),b.width.on("blur",function(){var a=$(this).val();if(""!=a&&a<b.drawningboard.width){var c=a/b.oldWidth;b.drawningboard.selector.setscale(c,null),b.drawningboard.selector.contextaction=!0,b.drawningboard.selector.contextrelease(),setTimeout(function(){b.loadWidth(a)},1)}else b.loadWidth(oldWidth)}),b.height.on("blur",function(){var a=$(this).val();if(""!=a&&a<b.drawningboard.height){var c=a/b.oldHeight;b.drawningboard.selector.setscale(null,c),b.drawningboard.selector.contextaction=!0,b.drawningboard.selector.contextrelease(),setTimeout(function(){b.loadHeight(a)},1)}else b.loadHeight(oldHeight)}),b.x.add(b.y).on("blur",function(){var a=b.x.val(),c=b.y.val(),d=b.drawningboard.selector.x,e=b.drawningboard.selector.y;if(""!=a&&""!=c){a=a.match(/\d+/)[0],c=c.match(/\d+/)[0],a>b.drawningboard.width&&(a=b.drawningboard.width),c>b.drawningboard.height&&(c=b.drawningboard.height);var f=a-d,g=c-e;b.drawningboard.selector.settargetpositionoffset(b.target,f,g),b.drawningboard.selector.contextaction=!0,b.drawningboard.selector.contextrelease(),setTimeout(function(){b.loadX(a),b.loadY(c)},1)}else b.loadX(d),b.loadY(e)})},b.start()};