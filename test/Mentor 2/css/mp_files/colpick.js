!function(a){colpick=function(b){var c=this;c.drawningboard=b,a.widget("ui.pctspinner",a.ui.spinner,{options:{max:100,min:0,step:1,spin:function(b,c){var d={cal:a(b.currentTarget).parent().parent().parent()};d.cal.find(".colpick_alpha_slider").slider("value",c.value),void 0!=d.cal.data("colpick")&&a(d.cal.data("colpick").el).colpickSetOpacity(parseFloat(c.value/100))},change:function(b){var c={cal:a(b.currentTarget).parent().parent().parent()};parseInt(a(this).val())<0?a(this).val("0%"):parseInt(a(this).val())>100?a(this).val("100%"):isNaN(parseInt(a(this).val()))&&a(this).val("100%"),c.cal.find(".colpick_alpha_slider").slider("value",a(this).val()),a(c.cal.data("colpick").el).colpickSetOpacity(parseFloat(a(this).val())/100)},create:function(){a(this).on("blur",function(b){var c={cal:a(b.currentTarget).parent().parent().parent()};c.cal.find(".colpick_alpha_slider").slider("value",a(this).val()),a(c.cal.data("colpick").el).colpickSetOpacity(parseFloat(a(this).val())/100)})}},_parse:function(a){return parseFloat(a)},_format:function(a){return a+"%"}});var d='<div class="colpick"> 					<div class="colpick_bg"></div> 					<span class="colpick_title" lang="colpick_title"></span> 					<span class="colpick_close">X</span> 					<div class="colpick_preset_colors"> 						<div class="preset11"/><div class="preset12"/><div class="preset13"/><div class="preset14"/><div class="preset15"/><div class="preset16"/><div class="preset17"/> 						<div class="preset21"/><div class="preset22"/><div class="preset23"/><div class="preset24"/><div class="preset25"/><div class="preset26"/><div class="preset27"/> 						<div class="preset31"/><div class="preset32"/><div class="preset33"/><div class="preset34"/><div class="preset35"/><div class="preset36"/><div class="preset37"/> 						<div class="preset41"/><div class="preset42"/><div class="preset43"/><div class="preset44"/><div class="preset45"/><div class="preset46"/><div class="preset47"/> 						<div class="preset51"/><div class="preset52"/><div class="preset53"/><div class="preset54"/><div class="preset55"/><div class="preset56"/><div class="preset57"/> 					</div> 					<span class="colpick_title_recent" lang="colpick_recent_colors"></span> 					<div class="colpick_recent"> 						<div class="recent_bg"><div class="recent1 recent"/></div> 						<div class="recent_bg"><div class="recent2 recent"/></div> 						<div class="recent_bg"><div class="recent3 recent"/></div> 						<div class="recent_bg"><div class="recent4 recent"/></div> 						<div class="recent_bg"><div class="recent5 recent"/></div> 						<div class="recent_bg"><div class="recent6 recent"/></div> 					</div> 				    <div class="colpick_color"> 				        <div class="colpick_color_overlay1"> 				            <div class="colpick_color_overlay2"> 				                <div class="colpick_selector_outer"> 				                    <div class="colpick_selector_inner"></div> 				                </div> 				            </div> 				        </div> 				    </div> 				    <div class="colpick_hue"> 				        <div class="colpick_hue_arrs"> 				            <div class="colpick_hue_larr"></div> 				            <div class="colpick_hue_rarr"></div> 				        </div> 				    </div> 				    <div class="colpick_new_color_bg"></div> 				    <div class="colpick_new_color"></div> 				    <div class="colpick_current_color"></div> 				    <div class="colpick_hex_field"> 				        <div class="colpick_field_letter">#</div> 				        <input type="text" maxlength="6" size="6" /> 				    </div> 				    <div class="colpick_rgb_r colpick_field"> 				        <div class="colpick_field_letter">R</div> 				        <input type="text" maxlength="3" size="3" /> 				        <div class="colpick_field_arrs"> 				            <div class="colpick_field_uarr"></div> 				            <div class="colpick_field_darr"></div> 				        </div> 				    </div> 				    <div class="colpick_rgb_g colpick_field"> 				        <div class="colpick_field_letter">G</div> 				        <input type="text" maxlength="3" size="3" /> 				        <div class="colpick_field_arrs"> 				            <div class="colpick_field_uarr"></div> 				            <div class="colpick_field_darr"></div> 				        </div> 				    </div> 				    <div class="colpick_rgb_b colpick_field"> 				        <div class="colpick_field_letter">B</div> 				        <input type="text" maxlength="3" size="3" /> 				        <div class="colpick_field_arrs"> 				            <div class="colpick_field_uarr"></div> 				            <div class="colpick_field_darr"></div> 				        </div> 				    </div> 				    <div class="colpick_hsb_h colpick_field"> 				        <div class="colpick_field_letter">H</div> 				        <input type="text" maxlength="3" size="3" /> 				        <div class="colpick_field_arrs"> 				            <div class="colpick_field_uarr"></div> 				            <div class="colpick_field_darr"></div> 				        </div> 				    </div> 				    <div class="colpick_hsb_s colpick_field"> 				        <div class="colpick_field_letter">S</div> 				        <input type="text" maxlength="3" size="3" /> 				        <div class="colpick_field_arrs"> 				            <div class="colpick_field_uarr"></div> 				            <div class="colpick_field_darr"></div> 				        </div> 				    </div> 				    <div class="colpick_hsb_b colpick_field"> 				        <div class="colpick_field_letter">B</div> 				        <input type="text" maxlength="3" size="3" /> 				        <div class="colpick_field_arrs"> 				            <div class="colpick_field_uarr"></div> 				            <div class="colpick_field_darr"></div> 				        </div> 				    </div>                     <div class="colpick_alpha_slider_bg"></div>                     <div class="colpick_alpha_slider"></div>                         <span class="colpick_title_opacity" lang="colpick_opacity"></span>                         <div class="colpick_alpha_field">                             <input class="colpick_alpha_input" type="text" value="100%"/>                         </div> 				    <div class="colpick_submit"></div>                     <div class="colpick_use_background">                         <i class="fa fa-square-o"></i>                         <span lang="colpick_use_background"></span>                     </div>                     <div class="colpick_buttoms"> 				    	<table class="colpick_buttoms_table"> 				    		<tr> 						    	<td><div class="cancel buttom" lang="cancel"></div></td> 						    	<td class="delete-td"><div class="delete buttom" lang="colpick_delete_color"></div></td> 						    	<td><div class="select buttom" lang="select"></div></td> 						    </tr> 						</table> 				    <div> 				</div>',e=function(){var b=c.drawningboard.api.fillTemplateLanguage(a(d)),e=b.outerHTML(),f={showEvent:"click",onShow:function(){},onBeforeShow:function(){},onHide:function(){},onChange:function(){},onSubmit:function(){},onDelete:function(){},onUseBackground:function(){},colorScheme:"dark",color:"FFFFFF",livePreview:!1,flat:!1,layout:"hex",showdelete:!1,backgroundPicker:!1,submit:0,submitText:"OK",height:156,id:!1},l=new Date,o=a.touchSupport()?"touchstart":"mousedown",p=function(b,c){var d=j(b);a(c).data("colpick").fields.eq(1).val(d.r).end().eq(2).val(d.g).end().eq(3).val(d.b).end()},q=function(b,c){b?a(c).data("colpick").fields.eq(4).val(Math.round(b.h)).end().eq(5).val(Math.round(b.s)).end().eq(6).val(Math.round(b.b)).end():a(c).data("colpick").fields.eq(4).val(0).end().eq(5).val(0).end().eq(6).val(0).end()},r=function(b,c){if(b)var d=m(b);else var d="- - - - - -";a(c).data("colpick").fields.eq(0).val(d)},s=function(b,c){b||(b={h:0,s:0,b:0}),a(c).data("colpick").selector.css("backgroundColor","#"+m({h:b.h,s:100,b:100})),a(c).data("colpick").selectorIndic.css({left:parseInt(a(c).data("colpick").height*b.s/100,10),top:parseInt(a(c).data("colpick").height*(100-b.b)/100,10)})},t=function(b,c){if(b)var d=b.h;else var d=0;a(c).data("colpick").hue.css("top",parseInt(a(c).data("colpick").height-a(c).data("colpick").height*d/360,10))},u=function(b,c){a(c).data("colpick").currentColor.css("backgroundColor","#"+m(b))},v=function(b,c){if(b){var d="#"+m(b);a(c).data("colpick").newColorBg.css("background-image","url('img/bg.png')")}else{var d="rgba(0, 0, 0, 0)";a(c).data("colpick").newColorBg.css("background-image","url('img/bgpickempty.png')")}a(c).data("colpick").newColor.css("backgroundColor",d)},w=function(){var b,c=a(this).parent().parent();this.parentNode.className.indexOf("_hex")>0?(c.data("colpick").color=b=g(Q(this.value)),p(b,c.get(0)),q(b,c.get(0))):this.parentNode.className.indexOf("_hsb")>0?(c.data("colpick").color=b=O({h:parseInt(c.data("colpick").fields.eq(4).val(),10),s:parseInt(c.data("colpick").fields.eq(5).val(),10),b:parseInt(c.data("colpick").fields.eq(6).val(),10)}),p(b,c.get(0)),r(b,c.get(0))):(c.data("colpick").color=b=h(P({r:parseInt(c.data("colpick").fields.eq(1).val(),10),g:parseInt(c.data("colpick").fields.eq(2).val(),10),b:parseInt(c.data("colpick").fields.eq(3).val(),10)})),r(b,c.get(0)),q(b,c.get(0))),b.a=1*parseInt(c.find(".colpick_alpha_field input").val())/100,s(b,c.get(0)),t(b,c.get(0)),v(b,c.get(0)),c.data("colpick").onChange.apply(c.parent(),[b,m(b),j(b),k(b),c.data("colpick").el,0])},x=function(){a(this).parent().removeClass("colpick_focus")},y=function(){a(this).parent().parent().data("colpick").fields.parent().removeClass("colpick_focus"),a(this).parent().addClass("colpick_focus")},z=function(b){var c=a(this).parent().find("input").not(".colpick_alpha_input").focus(),d={el:a(this).parent().addClass("colpick_slider"),max:this.parentNode.className.indexOf("_hsb_h")>0?360:this.parentNode.className.indexOf("_hsb")>0?100:255,y:b.pageY,field:c,val:parseInt(c.val(),10),preview:a(this).parent().parent().data("colpick").livePreview};a(document).mouseup(d,B),a(document).mousemove(d,A)},A=function(a){return a.data.field.val(Math.max(0,Math.min(a.data.max,parseInt(a.data.val-a.pageY+a.data.y,10)))),a.data.preview&&w.apply(a.data.field.get(0),[!0]),!1},B=function(b){w.apply(b.data.field.get(0),[!0]),b.data.el.removeClass("colpick_slider").find("input").not(".colpick_alpha_input").focus(),a(document).off("mouseup",B),a(document).off("mousemove",A)},C=function(b){var c={cal:a(this).parent(),y:a(this).offset().top};a(document).on("mouseup touchend",c,E),a(document).on("mousemove touchmove",c,D);var d="touchstart"==b.type?b.originalEvent.changedTouches[0].pageY:b.pageY;w.apply(c.cal.data("colpick").fields.eq(4).val(parseInt(360*(c.cal.data("colpick").height-(d-c.y))/c.cal.data("colpick").height,10)).get(0),[c.cal.data("colpick").livePreview])},D=function(a){a.preventDefault?a.preventDefault():a.returnValue=!1;var b="touchmove"==a.type?a.originalEvent.changedTouches[0].pageY:a.pageY;w.apply(a.data.cal.data("colpick").fields.eq(4).val(parseInt(360*(a.data.cal.data("colpick").height-Math.max(0,Math.min(a.data.cal.data("colpick").height,b-a.data.y)))/a.data.cal.data("colpick").height,10)).get(0),[a.data.preview])},E=function(b){p(b.data.cal.data("colpick").color,b.data.cal.get(0)),r(b.data.cal.data("colpick").color,b.data.cal.get(0)),a(document).off("mouseup touchend",E),a(document).off("mousemove touchmove",D)},F=function(b){b.preventDefault?b.preventDefault():b.returnValue=!1;var c={cal:a(this).parent(),pos:a(this).offset()};c.preview=c.cal.data("colpick").livePreview,a(document).on("mouseup touchend",c,J),a(document).on("mousemove touchmove",c,I),a(this).parent().find("div").removeClass("selected"),a(this).parent().parent().find(".colpick_recent div").removeClass("selected");var d;"touchstart"==b.type?(pageX=b.originalEvent.changedTouches[0].pageX,d=b.originalEvent.changedTouches[0].pageY):(pageX=b.pageX,d=b.pageY),w.apply(c.cal.data("colpick").fields.eq(6).val(parseInt(100*(c.cal.data("colpick").height-(d-c.pos.top))/c.cal.data("colpick").height,10)).end().eq(5).val(parseInt(100*(pageX-c.pos.left)/c.cal.data("colpick").height,10)).get(0),[c.preview])},G=function(b){b.preventDefault?b.preventDefault():b.returnValue=!1;var c={cal:a(this).parent().parent(),color:n(a(this).css("backgroundColor"))};a(this).parent().find("div").removeClass("selected"),a(this).parent().parent().find(".colpick_recent .recent").removeClass("selected"),a(this).addClass("selected"),a(c.cal.data("colpick").el).colpickSetColor(c.color);var d=new Date;300>d-l&&K(b),l=d},H=function(b){b.preventDefault?b.preventDefault():b.returnValue=!1;var c={cal:a(this).parent().parent().parent(),color:n(a(this).css("backgroundColor"))};a(this).parent().parent().find("div").removeClass("selected"),a(this).parent().parent().parent().find(".colpick_preset_colors div").removeClass("selected"),a(this).addClass("selected"),a(c.cal.data("colpick").el).colpickSetColor(c.color);var d=new Date;300>d-l&&K(b),l=d},I=function(b){b.preventDefault?b.preventDefault():b.returnValue=!1;var c;"touchmove"==b.type?(pageX=b.originalEvent.changedTouches[0].pageX,c=b.originalEvent.changedTouches[0].pageY):(pageX=b.pageX,c=b.pageY),a(this).parent().find("div").removeClass("selected"),a(this).parent().parent().find(".colpick_recent div").removeClass("selected"),w.apply(b.data.cal.data("colpick").fields.eq(6).val(parseInt(100*(b.data.cal.data("colpick").height-Math.max(0,Math.min(b.data.cal.data("colpick").height,c-b.data.pos.top)))/b.data.cal.data("colpick").height,10)).end().eq(5).val(parseInt(100*Math.max(0,Math.min(b.data.cal.data("colpick").height,pageX-b.data.pos.left))/b.data.cal.data("colpick").height,10)).get(0),[b.data.preview])},J=function(b){return p(b.data.cal.data("colpick").color,b.data.cal.get(0)),r(b.data.cal.data("colpick").color,b.data.cal.get(0)),a(document).off("mouseup touchend",J),a(document).off("mousemove touchmove",I),!1},K=function(b){var d=a(b.target).parents(".colpick"),e=d.data("colpick").color;e.a=1*parseInt(d.find(".colpick_alpha_field input").val())/100,d.data("colpick").origColor=e,u(e,d.get(0));var f=k(e);c.drawningboard.addrecentcolor(f),d.data("colpick").onSubmit(e,m(e),j(e),k(e),d.data("colpick").el),d.slideUp("fast")},L=function(b){b.stopPropagation();var d=a("#"+a(this).data("colpickId"));d.data("colpick").onBeforeShow.apply(this,[d]);var e=a(this).offset(),f=e.top+this.offsetHeight,g=e.left,h=N(),i=d.width();g+i>h.l+h.w&&(g-=i),d.css({left:g+"px",top:f+"px"}),0==d.data("colpick").onShow.apply(this,[d.get(0)])||d.dragging||d.finish().slideDown("fast");for(var j=1;j<=c.drawningboard.recentcolors.length&&6>=j;j++)a(".recent"+j).css("background-color","rgba("+c.drawningboard.recentcolors[j-1].r+","+window.drawningboard.recentcolors[j-1].g+","+window.drawningboard.recentcolors[j-1].b+","+window.drawningboard.recentcolors[j-1].a+")");a("html").on(o,{cal:d},M),d.on(o,function(a){a.stopPropagation()})},M=function(b){if(b.data.cal.data("colpick")&&0!=b.data.cal.data("colpick").onHide.apply(this,[b.data.cal.get(0)])&&b.data.cal.finish().slideUp("fast"),b.data.cal.find(".colpick_preset_colors div").removeClass("selected"),b.data.cal.find(".colpick_recent div").removeClass("selected"),b.data.cal.data("colpick")){var c=b.data.cal.data("colpick").color;c.a=1*parseInt(b.data.cal.find(".colpick_alpha_field input").val())/100;var d=b.data.cal.data("colpick").origColor;if(!d||c.h!=d.h||c.s!=d.s||c.b!=d.b||c.a!=d.a){b.data.cal.data("colpick").origColor=c;var e=k(c);window.drawningboard.addrecentcolor(e)}a("html").off(o,M)}},N=function(){var a="CSS1Compat"==document.compatMode;return{l:window.pageXOffset||(a?document.documentElement.scrollLeft:document.body.scrollLeft),w:window.innerWidth||(a?document.documentElement.clientWidth:document.body.clientWidth)}},O=function(a){return{h:Math.min(360,Math.max(0,a.h)),s:Math.min(100,Math.max(0,a.s)),b:Math.min(100,Math.max(0,a.b)),a:a.a}},P=function(a){return{r:Math.min(255,Math.max(0,a.r)),g:Math.min(255,Math.max(0,a.g)),b:Math.min(255,Math.max(0,a.b))}},Q=function(a){var b=6-a.length;if(b>0){for(var c=[],d=0;b>d;d++)c.push("0");c.push(a),a=c.join("")}return a},R=function(b){if(b){var c=b.origColor;c&&a(b.el).colpickSetColor(c)}};return{init:function(b){return b=a.extend({},f,b||{}),this.each(function(){if(!a(this).data("colpickId")){var c=a.extend({},b);if(a.touchSupport())var d="touchstart";else var d="mousedown";if(c.id)var f="colorpicker_"+c.id;else var f="colorpicker_"+parseInt(1e3*Math.random());a(this).data("colpickId",f);var g=a(e).attr("id",f);g.addClass("colpick_"+c.layout+(c.submit?"":" colpick_"+c.layout+"_ns")),"light"!=c.colorScheme&&g.addClass("colpick_"+c.colorScheme),c.showdelete||g.find(".colpick_buttoms .delete-td").hide(),c.backgroundPicker||g.find(".colpick_use_background").hide(),g.find(".colpick_buttoms .select").click(K),c.fields=g.find("input").not(".colpick_alpha_input").change(w).blur(x).focus(y),g.find("div.colpick_field_arrs").mousedown(z).end().find("div.colpick_current_color").click(R),c.selector=g.find("div.colpick_color").on(d,F),g.find(".colpick_preset_colors div").on(d,G),g.find(".colpick_recent .recent").on(d,H),g.find(".colpick_use_background").on("click",function(){var b=a(this).find(".fa");b.hasClass("fa-check-square-o")?(b.removeClass("fa-check-square-o"),b.addClass("fa-square-o"),c.onUseBackground(!1)):(b.addClass("fa-check-square-o"),b.removeClass("fa-square-o"),c.onUseBackground(!0))}),g.find(".colpick_alpha_slider").slider({min:0,max:100,range:"min",value:100,slide:function(b,c){g.find(".colpick_alpha_field input").val(c.value+"%");var d={cal:a(this).parent()};a(d.cal.data("colpick").el).colpickSetOpacity(parseFloat(c.value/100))}}),g.find(".colpick_alpha_slider").slider("value",parseInt(100*b.color.a)),g.find(".colpick_alpha_field input").val(parseInt(100*b.color.a)),g.find(".colpick_alpha_field input").pctspinner(),c.selectorIndic=c.selector.find("div.colpick_selector_outer"),c.el=this,c.hue=g.find("div.colpick_hue_arrs"),c.color=c.origColor=n(a(c.el).css("background-color")),huebar=c.hue.parent();var h=navigator.userAgent.toLowerCase(),i="Microsoft Internet Explorer"===navigator.appName,j=i?parseFloat(h.match(/msie ([0-9]{1,}[\.0-9]{0,})/)[1]):0,k=i&&10>j,l=["#ff0000","#ff0080","#ff00ff","#8000ff","#0000ff","#0080ff","#00ffff","#00ff80","#00ff00","#80ff00","#ffff00","#ff8000","#ff0000"];if(k){var m,o;for(m=0;11>=m;m++)o=a("<div></div>").attr("style","height:8.333333%; filter:progid:DXImageTransform.Microsoft.gradient(GradientType=0,startColorstr="+l[m]+", endColorstr="+l[m+1]+'); -ms-filter: "progid:DXImageTransform.Microsoft.gradient(GradientType=0,startColorstr='+l[m]+", endColorstr="+l[m+1]+')";'),huebar.append(o)}else stopList=l.join(","),huebar.attr("style","background:-webkit-linear-gradient(top,"+stopList+"); background: -o-linear-gradient(top,"+stopList+"); background: -ms-linear-gradient(top,"+stopList+"); background:-moz-linear-gradient(top,"+stopList+"); -webkit-linear-gradient(top,"+stopList+"); background:linear-gradient(to bottom,"+stopList+"); ");g.find("div.colpick_hue").on(d,C),c.newColor=g.find("div.colpick_new_color"),c.newColorBg=g.find("div.colpick_new_color_bg"),c.currentColor=g.find("div.colpick_current_color"),g.find(".colpick_buttoms .cancel, .colpick_close").on(d,function(a){a.preventDefault?a.preventDefault():a.returnValue=!1,g.slideUp("fast"),R(g.data("colpick"))}),g.find(".colpick_buttoms .delete").on(d,function(a){a.preventDefault?a.preventDefault():a.returnValue=!1,g.slideUp("fast"),g.data("colpick").onDelete.apply(g.parent(),[g.data("colpick").el,g])}),g.data("colpick",c),p(c.color,g.get(0)),q(c.color,g.get(0)),r(c.color,g.get(0)),t(c.color,g.get(0)),s(c.color,g.get(0)),u(c.color,g.get(0)),v(c.color,g.get(0)),c.flat?(g.appendTo(this).slideDown(),g.css({position:"relative",display:"block"})):(g.appendTo(document.body),a(this).on(c.showEvent,L),g.css({position:"absolute"}))}})},showPicker:function(){return this.each(function(){a(this).data("colpickId")&&L.apply(this)})},hidePicker:function(){return this.each(function(){a(this).data("colpickId")&&a("#"+a(this).data("colpickId")).hide()})},setColor:function(b,c){if(c="undefined"==typeof c?1:c,"string"==typeof b)b=g(b);else if(void 0!=b.r&&void 0!=b.g&&void 0!=b.b&&void 0!=b.a)b=i(b);else if(void 0!=b.r&&void 0!=b.g&&void 0!=b.b)b=h(b);else{if(void 0==b.h||void 0==b.s||void 0==b.b)return this;b=O(b)}return this.each(function(){if(a(this).data("colpickId")){var d=a("#"+a(this).data("colpickId"));if(d.data("colpick").color=b,p(b,d.get(0)),q(b,d.get(0)),r(b,d.get(0)),t(b,d.get(0)),s(b,d.get(0)),b)var e=b.a;else var e=1;d.find(".colpick_new_color").css("opacity",e),d.find(".colpick_alpha_slider").slider("value",parseInt(100*e)),d.find(".colpick_alpha_field input").val(parseInt(100*e)+"%"),v(b,d.get(0)),d.data("colpick").onChange.apply(d.parent(),[b,m(b),j(b),k(b),d.data("colpick").el,1]),c&&u(b,d.get(0))}})},setOriginal:function(b,c){if(c="undefined"==typeof c?1:c,b)if("string"==typeof b)b=g(b);else if(void 0!=b.r&&void 0!=b.g&&void 0!=b.b&&void 0!=b.a)b=i(b);else if(void 0!=b.r&&void 0!=b.g&&void 0!=b.b)b=h(b);else{if(void 0==b.h||void 0==b.s||void 0==b.b)return this;b=O(b)}else b=void 0;return this.each(function(){if(a(this).data("colpickId")){var d=a("#"+a(this).data("colpickId"));if(b)var e=b.a,f=b;else var e=1,f={h:0,s:0,b:0,a:1};d.find(".colpick_new_color").css("opacity",e),d.find(".colpick_alpha_slider").slider("value",parseInt(100*e)),d.find(".colpick_alpha_field input").val(parseInt(100*e)+"%"),d.data("colpick").color=f,d.data("colpick").origColor=b,p(b,d.get(0)),q(b,d.get(0)),r(b,d.get(0)),t(f,d.get(0)),s(f,d.get(0)),v(b,d.get(0)),c&&u(f,d.get(0))}})},setOpacity:function(b){return this.each(function(){if(a(this).data("colpickId")){var c=a("#"+a(this).data("colpickId"));c.data("colpick").color.a=b,c.find(".colpick_new_color").css("opacity",b),a(c.data("colpick").el).colpickSetColor(c.data("colpick").color)}})}}}(),f=function(a){var a=parseInt(a.indexOf("#")>-1?a.substring(1):a,16);return{r:a>>16,g:(65280&a)>>8,b:255&a}},g=function(a){return h(f(a))},h=function(a){var b={h:0,s:0,b:0},c=Math.min(a.r,a.g,a.b),d=Math.max(a.r,a.g,a.b),e=d-c;return b.b=d,b.s=0!=d?255*e/d:0,b.h=0!=b.s?a.r==d?(a.g-a.b)/e:a.g==d?2+(a.b-a.r)/e:4+(a.r-a.g)/e:-1,b.h*=60,b.h<0&&(b.h+=360),b.s*=100/255,b.b*=100/255,b.a=a.a,b},i=function(a){var b={h:0,s:0,b:0},c=Math.min(a.r,a.g,a.b),d=Math.max(a.r,a.g,a.b),e=d-c;return b.b=d,b.s=0!=d?255*e/d:0,b.h=0!=b.s?a.r==d?(a.g-a.b)/e:a.g==d?2+(a.b-a.r)/e:4+(a.r-a.g)/e:-1,b.h*=60,b.h<0&&(b.h+=360),b.s*=100/255,b.b*=100/255,b.a=a.a,b},j=function(a){var b={};if(a)var c=a.h,d=255*a.s/100,e=255*a.b/100;else var c=0,d=0,e=0;if(0==d)b.r=b.g=b.b=e;else{var f=e,g=(255-d)*e/255,h=(f-g)*(c%60)/60;360==c&&(c=0),60>c?(b.r=f,b.b=g,b.g=g+h):120>c?(b.g=f,b.b=g,b.r=f-h):180>c?(b.g=f,b.r=g,b.b=g+h):240>c?(b.b=f,b.r=g,b.g=f-h):300>c?(b.b=f,b.g=g,b.r=g+h):360>c?(b.r=f,b.g=g,b.b=f-h):(b.r=0,b.g=0,b.b=0)}return{r:Math.round(b.r),g:Math.round(b.g),b:Math.round(b.b)}},k=function(a){var b={};if(a)var c=a.h,d=255*a.s/100,e=255*a.b/100,f=a.a;else var c=0,d=0,e=0,f=1;if(0==d)b.r=b.g=b.b=e;else{var g=e,h=(255-d)*e/255,i=(g-h)*(c%60)/60;360==c&&(c=0),60>c?(b.r=g,b.b=h,b.g=h+i):120>c?(b.g=g,b.b=h,b.r=g-i):180>c?(b.g=g,b.r=h,b.b=h+i):240>c?(b.b=g,b.r=h,b.g=g-i):300>c?(b.b=g,b.g=h,b.r=h+i):360>c?(b.r=g,b.g=h,b.b=g-i):(b.r=0,b.g=0,b.b=0)}return{r:Math.round(b.r),g:Math.round(b.g),b:Math.round(b.b),a:f}},l=function(b){var c=[b.r.toString(16),b.g.toString(16),b.b.toString(16)];return a.each(c,function(a,b){1==b.length&&(c[a]="0"+b)}),c.join("")},m=function(a){return l(j(a))},n=function(a){if(a.indexOf("rgba")>=0){a=a.match(/^rgba\((\d+),\s*(\d+),\s*(\d+),\s*(\d*\.*\d+)\)$/);var b={r:parseInt(a[1]),g:parseInt(a[2]),b:parseInt(a[3]),a:parseFloat(a[4])}}else if("transparent"==a)var b={r:255,g:255,b:255,a:0};else b=o(a),b.a=1;return b},o=function(a){a=a.match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);var b={r:parseInt(a[1]),g:parseInt(a[2]),b:parseInt(a[3])};return b};a.fn.extend({colpick:e.init,colpickHide:e.hidePicker,colpickShow:e.showPicker,colpickSetColor:e.setColor,colpickSetOriginal:e.setOriginal,colpickSetOpacity:e.setOpacity}),a.extend({colpick:{stringToRgba:n,rgbToHex:l,rgbToHsb:h,hsbToHex:m,hsbToRgb:j,hexToHsb:g,hexToRgb:f}})}}(jQuery);