Maincolorbox=function(a,b,c){var d=this;d.tab=a,d.dom=$('<div class="color-picker"><div class="color-picker-color"></div></div>'),d.colordom=d.dom.find(".color-picker-color"),d.context=b,d.color=c,d.originalcolor=c.color,d.colorlist=[],d.cliplist=[],d.update=function(){$.each(d.colorlist,function(a,b){b.color=d.color.color}),$.each(d.cliplist,function(a,b){b.update()})},d.start=function(){$.each(d.tab.drawningboard.cliplist,function(a,b){b.enabled()&&$.each(b.color.colorlist,function(a,c){c.color==d.originalcolor&&(d.colorlist.push(c),d.cliplist.push(b))})}),d.context.prepend(d.dom),d.colordom.css("background-color",d.color.color);var a=d.colordom.colpick({onChange:function(a,b,c,e,f){$(f).css("background-color","rgba("+e.r+","+e.g+","+e.b+","+e.a+")"),d.color.color="rgba("+e.r+","+e.g+","+e.b+","+e.a+")",d.update(),d.tab.drawningboard.isFirefox&&d.tab.drawningboard.selector.refreshindex()},onSubmit:function(){d.color.color!=d.originalcolor&&(d.originalcolor=d.color.color.replaceAll(" ",""),d.tab.drawningboard.selector.changed=1,d.tab.drawningboard.selector.save())},onHide:function(){d.color.color!=d.originalcolor&&(d.originalcolor=d.color.color.replaceAll(" ",""),d.tab.drawningboard.selector.changed=1,d.tab.drawningboard.selector.save())}});a.colpickSetOriginal($.colpick.stringToRgba(d.color.color))}};