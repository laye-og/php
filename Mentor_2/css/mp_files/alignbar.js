Alignbar=function(a){var b=this;b.dom,b.drawningboard=a,b.selector=b.drawningboard.selector,b.target,b.eventtype=b.drawningboard.isTouch?"touchstart":"mousedown",b.start=function(){b.drawningboard.api.loadTemplate("alignbar",function(a){b.dom=$(a),b.drawningboard.dom.after(b.dom),b.drawningboard.formatsvg(b.dom),b.registerevents(),b.dom.hide()})},b.hide=function(){b.dom.hide()},b.show=function(){b.dom.show()},b.select=function(a){b.target=a,b.selector=b.drawningboard.selector,a&&a.length>1&&(b.selector.explodedmode||!b.selector.targetisicon(a)&&!b.selector.targetisgroup(a))?b.show():b.hide()},b.registerevents=function(){b.dom.find(".align-left").on(b.eventtype,b.alignLeft),b.dom.find(".align-right").on(b.eventtype,b.alignRight),b.dom.find(".align-center").on(b.eventtype,b.alignCenter),b.dom.find(".align-middle").on(b.eventtype,b.alignMiddle),b.dom.find(".align-top").on(b.eventtype,b.alignTop),b.dom.find(".align-bottom").on(b.eventtype,b.alignBottom)},b.posAlign=function(){b.selector.gettargetdata(),b.selector.update(),b.selector.save()},b.preAlign=function(){b.selector.changed=1,b.selector.closecontext()},b.alignLeft=function(){b.preAlign(),$.each(b.target,function(a,c){var d=b.selector.getrotatedcoordsoffset(c,c.x,c.y),e=Math.min.apply(Math,[d.x1,d.x2,d.x3,d.x4]),f=Math.max.apply(Math,[d.x1,d.x2,d.x3,d.x4]),g=(f-e)/2;if((b.selector.clipisicon(c)||b.selector.clipisgroup(c))&&!b.selector.explodedmode){if(b.selector.clipisgroup(c))var h=b.selector.getgroupcoords(c);else var h=b.selector.geticoncoords(c);var i=Math.min.apply(Math,[h.x1,h.x2,h.x3,h.x4]),j=e-i;g+=j}setTimeout(function(){c.x=g+(b.selector.x+b.selector.selectionborderw-b.selector.width/2),c.update()},1)}),setTimeout(function(){b.posAlign()},1)},b.alignRight=function(){b.preAlign(),$.each(b.target,function(a,c){var d=b.selector.getrotatedcoordsoffset(c,c.x,c.y),e=Math.min.apply(Math,[d.x1,d.x2,d.x3,d.x4]),f=Math.max.apply(Math,[d.x1,d.x2,d.x3,d.x4]),g=(f-e)/2;if((b.selector.clipisicon(c)||b.selector.clipisgroup(c))&&!b.selector.explodedmode){if(b.selector.clipisgroup(c))var h=b.selector.getgroupcoords(c);else var h=b.selector.geticoncoords(c);var i=Math.max.apply(Math,[h.x1,h.x2,h.x3,h.x4]),j=i-f;g+=j}setTimeout(function(){c.x=-g+(b.selector.x-b.selector.selectionborderw+b.selector.width/2),c.update()},1)}),setTimeout(function(){b.posAlign()},1)},b.alignCenter=function(){b.preAlign(),$.each(b.target,function(a,c){if(!b.selector.clipisicon(c)&&!b.selector.clipisgroup(c)||b.selector.explodedmode)var d=b.selector.x;else{if(b.selector.clipisgroup(c))var e=b.selector.getgroupcoords(c);else var e=b.selector.geticoncoords(c);var d=b.selector.x-e.xc+c.x}setTimeout(function(){c.x=d,c.update()},1)}),setTimeout(function(){b.posAlign()},1)},b.alignMiddle=function(){b.preAlign(),$.each(b.target,function(a,c){if(!b.selector.clipisicon(c)&&!b.selector.clipisgroup(c)||b.selector.explodedmode)var d=b.selector.y;else{if(b.selector.clipisgroup(c))var e=b.selector.getgroupcoords(c);else var e=b.selector.geticoncoords(c);var d=b.selector.y-e.yc+c.y}setTimeout(function(){c.y=d,c.update()},1)}),setTimeout(function(){b.posAlign()},1)},b.alignTop=function(){b.preAlign(),$.each(b.target,function(a,c){var d=b.selector.getrotatedcoordsoffset(c,c.x,c.y),e=Math.min.apply(Math,[d.y1,d.y2,d.y3,d.y4]),f=Math.max.apply(Math,[d.y1,d.y2,d.y3,d.y4]),g=(f-e)/2;if((b.selector.clipisicon(c)||b.selector.clipisgroup(c))&&!b.selector.explodedmode){if(b.selector.clipisgroup(c))var h=b.selector.getgroupcoords(c);else var h=b.selector.geticoncoords(c);var i=Math.min.apply(Math,[h.y1,h.y2,h.y3,h.y4]),j=e-i;g+=j}setTimeout(function(){c.y=g+(b.selector.y+b.selector.selectionborderh-b.selector.height/2),c.update()},1)}),setTimeout(function(){b.posAlign()},1)},b.alignBottom=function(){b.preAlign(),$.each(b.target,function(a,c){var d=b.selector.getrotatedcoordsoffset(c,c.x,c.y),e=Math.min.apply(Math,[d.y1,d.y2,d.y3,d.y4]),f=Math.max.apply(Math,[d.y1,d.y2,d.y3,d.y4]),g=(f-e)/2;if((b.selector.clipisicon(c)||b.selector.clipisgroup(c))&&!b.selector.explodedmode){if(b.selector.clipisgroup(c))var h=b.selector.getgroupcoords(c);else var h=b.selector.geticoncoords(c);var i=Math.max.apply(Math,[h.y1,h.y2,h.y3,h.y4]),j=i-f;g+=j}setTimeout(function(){c.y=-g+(b.selector.y-b.selector.selectionborderh+b.selector.height/2),c.update()},1)}),setTimeout(function(){b.posAlign()},1)},b.start()};